--- origsrc/kdelibs-4.2.0/kio/kio/slaveinterface_p.h	2009-01-06 17:35:41.000000000 -0600
+++ src/kdelibs-4.2.0/kio/kio/slaveinterface_p.h	2009-01-15 21:08:53.338438900 -0600
@@ -21,6 +21,7 @@
 
 #include "global.h"
 #include "connection.h"
+#include <sys/time.h>
 #include <QtCore/QTimer>
 #include <QtNetwork/QHostInfo>
 
--- origsrc/kdelibs-4.1.4/kpty/kpty.cpp	2009-01-06 17:35:57.000000000 -0600
+++ src/kdelibs-4.1.4/kpty/kpty.cpp	2009-01-15 17:28:14.447813900 -0600
@@ -483,7 +483,7 @@ void KPty::login(const char *user, const
     addToUtmp(d->ttyName, remotehost, d->masterFd);
     Q_UNUSED(user);
 #else
-# ifdef HAVE_UTMPX
+# ifdef HAVE_LOGINX
     struct utmpx l_struct;
 # else
     struct utmp l_struct;
@@ -514,7 +514,7 @@ void KPty::login(const char *user, const
 #  endif
 # endif
 
-# ifdef HAVE_UTMPX
+# ifdef HAVE_LOGINX
     gettimeofday(&l_struct.ut_tv, 0);
 # else
     l_struct.ut_time = time(0);
