diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/kdelibs-4.0.99/kio/kio/slaveinterface_p.h src/kdelibs-4.0.99/kio/kio/slaveinterface_p.h
--- origsrc/kdelibs-4.0.99/kio/kio/slaveinterface_p.h	2008-05-21 06:07:57.000000000 -0500
+++ src/kdelibs-4.0.99/kio/kio/slaveinterface_p.h	2008-07-21 12:25:08.640625000 -0500
@@ -21,6 +21,7 @@
 
 #include "global.h"
 #include "connection.h"
+#include <sys/time.h>
 #include <QTimer>
 
 static const unsigned int max_nums = 8;
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/kdelibs-4.0.99/kjs/collector.cpp src/kdelibs-4.0.99/kjs/collector.cpp
--- origsrc/kdelibs-4.0.99/kjs/collector.cpp	2008-05-21 06:06:47.000000000 -0500
+++ src/kdelibs-4.0.99/kjs/collector.cpp	2008-07-21 00:28:13.734375000 -0500
@@ -42,7 +42,7 @@
 #include <mach/thread_act.h>
 #include <mach/vm_map.h>
 
-#elif PLATFORM(WIN_OS)
+#elif PLATFORM(WIN_OS) || COMPILER(CYGWIN)
 
 #include <windows.h>
 
@@ -173,7 +173,7 @@
 #if PLATFORM(DARWIN)
     vm_address_t address = 0;
     vm_map(current_task(), &address, BLOCK_SIZE, BLOCK_OFFSET_MASK, VM_FLAGS_ANYWHERE, MEMORY_OBJECT_NULL, 0, FALSE, VM_PROT_DEFAULT, VM_PROT_DEFAULT, VM_INHERIT_DEFAULT);
-#elif PLATFORM(WIN_OS)
+#elif PLATFORM(WIN_OS) || COMPILER(CYGWIN)
      // windows virtual address granularity is naturally 64k
     LPVOID address = VirtualAlloc(NULL, BLOCK_SIZE, MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);
 #elif HAVE(POSIX_MEMALIGN)
@@ -215,7 +215,7 @@
 
 #if PLATFORM(DARWIN)
     vm_deallocate(current_task(), reinterpret_cast<vm_address_t>(block), BLOCK_SIZE);
-#elif PLATFORM(WIN_OS)
+#elif PLATFORM(WIN_OS) || COMPILER(CYGWIN)
     VirtualFree(block, BLOCK_SIZE, MEM_RELEASE);
 #elif HAVE(POSIX_MEMALIGN)
     free(block);
@@ -486,7 +486,7 @@
         MOV pTib, EAX
     }
     void *stackBase = (void *)pTib->StackBase;
-#elif PLATFORM(WIN_OS) && PLATFORM(X86) && COMPILER(GCC)
+#elif (PLATFORM(WIN_OS) || COMPILER(CYGWIN)) && PLATFORM(X86) && COMPILER(GCC)
     NT_TIB *pTib;
 		__asm__("movl  %%fs:0x18,%0"
 						: "=r" (pTib)
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/kdelibs-4.0.99/kpty/kpty.cpp src/kdelibs-4.0.99/kpty/kpty.cpp
--- origsrc/kdelibs-4.0.99/kpty/kpty.cpp	2008-07-08 04:54:19.000000000 -0500
+++ src/kdelibs-4.0.99/kpty/kpty.cpp	2008-07-21 03:14:43.578125000 -0500
@@ -483,7 +483,7 @@
     addToUtmp(d->ttyName, remotehost, d->masterFd);
     Q_UNUSED(user);
 #else
-# ifdef HAVE_UTMPX
+# ifdef HAVE_LOGINX
     struct utmpx l_struct;
 # else
     struct utmp l_struct;
@@ -514,7 +514,7 @@
 #  endif
 # endif
 
-# ifdef HAVE_UTMPX
+# ifdef HAVE_LOGINX
     gettimeofday(&l_struct.ut_tv, 0);
 # else
     l_struct.ut_time = time(0);
@@ -562,7 +562,11 @@
 #else
     Q_D(KPty);
 
+#ifdef Q_OS_CYGWIN
+    char *str_ptr = d->ttyName.data();
+#else
     const char *str_ptr = d->ttyName.data();
+#endif
     if (!memcmp(str_ptr, "/dev/", 5))
         str_ptr += 5;
 # ifdef __GLIBC__
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/kdelibs-4.0.99/kpty/kptydevice.cpp src/kdelibs-4.0.99/kpty/kptydevice.cpp
--- origsrc/kdelibs-4.0.99/kpty/kptydevice.cpp	2008-05-21 06:08:16.000000000 -0500
+++ src/kdelibs-4.0.99/kpty/kptydevice.cpp	2008-07-21 03:16:23.265625000 -0500
@@ -41,6 +41,10 @@
 # include <sys/time.h>
 #endif
 
+#ifdef Q_OS_CYGWIN
+#define FIONREAD TIOCINQ
+#endif
+
 #define KMAXINT ((int)(~0U >> 1))
 
 /////////////////////////////////////////////////////
